<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0f">
    <title>For My Valentine</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        surface: { DEFAULT: '#0a0a0f', light: '#12121a', card: '#161622' },
                        accent: { DEFAULT: '#e8364e', soft: '#ff6b81', glow: '#ff2d55' },
                        gold: { DEFAULT: '#d4a853', soft: '#f0d78c' },
                    }
                }
            }
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        *, *::before, *::after { -webkit-tap-highlight-color: transparent; }

        :root {
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
            --safe-left: env(safe-area-inset-left, 0px);
            --safe-right: env(safe-area-inset-right, 0px);
        }

        html {
            scroll-behavior: smooth;
            -webkit-text-size-adjust: 100%;
            overscroll-behavior-y: none;
        }

        body {
            background-color: #0a0a0f;
            color: #f3f3f3;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding-top: var(--safe-top);
            padding-left: var(--safe-left);
            padding-right: var(--safe-right);
        }

        .h-screen-safe {
            height: 100vh;
            height: 100dvh;
        }

        .min-h-screen-safe {
            min-height: 100vh;
            min-height: 100dvh;
        }

        h1, h2, h3, h4 { font-family: 'Playfair Display', serif; }

        /* --- Animated gradient mesh background --- */
        .gradient-mesh {
            position: fixed;
            inset: 0;
            z-index: 0;
            overflow: hidden;
            pointer-events: none;
        }
        .gradient-mesh::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            top: -25%;
            left: -25%;
            background:
                radial-gradient(ellipse 600px 600px at 20% 30%, rgba(232, 54, 78, 0.08) 0%, transparent 70%),
                radial-gradient(ellipse 500px 500px at 80% 20%, rgba(212, 168, 83, 0.05) 0%, transparent 70%),
                radial-gradient(ellipse 800px 800px at 50% 80%, rgba(232, 54, 78, 0.06) 0%, transparent 70%);
            animation: meshFloat 20s ease-in-out infinite alternate;
        }
        @keyframes meshFloat {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-30px, -20px) rotate(3deg); }
        }

        /* --- Floating particles canvas --- */
        #bg-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            opacity: 0.5;
            pointer-events: none;
        }

        /* --- Glass morphism cards --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 1.5rem;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .glass-card:hover, .glass-card:active {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(232, 54, 78, 0.2);
            box-shadow: 0 20px 60px rgba(232, 54, 78, 0.08), 0 0 0 1px rgba(232, 54, 78, 0.1);
        }

        /* --- Image styling --- */
        .img-container {
            width: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.06);
            background: #12121a;
        }
        .img-container::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 50%, rgba(10, 10, 15, 0.8) 100%);
            pointer-events: none;
            z-index: 2;
        }

        .img-full-view {
            width: 100%;
            height: auto;
            display: block;
            object-fit: contain;
            transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .img-cover-view {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .img-container:hover .img-full-view,
        .img-container:hover .img-cover-view,
        .img-container:active .img-full-view,
        .img-container:active .img-cover-view {
            transform: scale(1.05);
        }

        /* --- Hero text effects --- */
        .hero-title {
            background: linear-gradient(135deg, #ffffff 0%, #ff6b81 25%, #ffffff 50%, #d4a853 75%, #ffffff 100%);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 6s ease-in-out infinite;
        }
        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* --- Scroll indicator --- */
        .scroll-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
        }
        .scroll-line {
            width: 1px;
            height: 40px;
            background: linear-gradient(to bottom, rgba(232, 54, 78, 0.6), transparent);
            animation: scrollPulse 2s ease-in-out infinite;
        }
        @keyframes scrollPulse {
            0%, 100% { opacity: 1; transform: scaleY(1); }
            50% { opacity: 0.3; transform: scaleY(0.6); }
        }

        /* --- Decorative line --- */
        .accent-line {
            height: 2px;
            width: 60px;
            background: linear-gradient(90deg, #e8364e, #d4a853);
            border-radius: 2px;
        }

        /* --- Photo gallery tilt --- */
        .tilt-card {
            transform-style: preserve-3d;
            transform: perspective(1000px);
            will-change: transform;
        }

        /* --- CTA button --- */
        .cta-btn {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 2.5rem;
            font-weight: 600;
            font-size: 1.1rem;
            letter-spacing: 0.05em;
            color: #ffffff;
            border: none;
            border-radius: 100px;
            background: linear-gradient(135deg, #e8364e 0%, #ff2d55 50%, #d4a853 100%);
            background-size: 200% 200%;
            animation: btnGradient 4s ease infinite;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.3s ease;
            box-shadow: 0 4px 30px rgba(232, 54, 78, 0.3);
        }
        .cta-btn:hover, .cta-btn:active {
            transform: scale(1.05);
            box-shadow: 0 8px 50px rgba(232, 54, 78, 0.5);
        }
        .cta-btn:active {
            transform: scale(0.97);
        }
        @keyframes btnGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .cta-btn .btn-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: btnShine 3s ease-in-out infinite;
        }
        @keyframes btnShine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        /* --- Surprise overlay --- */
        #surprise-overlay {
            background: radial-gradient(circle at center, #1a0a0a 0%, #000000 100%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }
        #surprise-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        #surprise-overlay .reveal-content {
            transform: scale(0.8) translateY(30px);
            opacity: 0;
            transition: all 1s cubic-bezier(0.23, 1, 0.32, 1) 0.3s;
        }
        #surprise-overlay.active .reveal-content {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        /* --- Heartbeat animation --- */
        .heartbeat {
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.08); }
            56% { transform: scale(1); }
        }

        /* --- Floating hearts --- */
        .floating-heart {
            position: absolute;
            font-size: 1.2rem;
            opacity: 0;
            animation: floatHeart 6s ease-in-out infinite;
            pointer-events: none;
        }
        @keyframes floatHeart {
            0% { opacity: 0; transform: translateY(0) scale(0.5) rotate(0deg); }
            10% { opacity: 0.6; }
            90% { opacity: 0; }
            100% { transform: translateY(-200px) scale(1) rotate(20deg); opacity: 0; }
        }

        /* --- Section dividers --- */
        .section-divider {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(232, 54, 78, 0.3), rgba(212, 168, 83, 0.2), transparent);
        }

        /* --- Glow text --- */
        .glow-text {
            text-shadow: 0 0 30px rgba(232, 54, 78, 0.3), 0 0 60px rgba(232, 54, 78, 0.1);
        }

        /* --- Timeline dot --- */
        .timeline-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e8364e, #d4a853);
            box-shadow: 0 0 15px rgba(232, 54, 78, 0.5);
        }

        /* --- Smooth reveal for gallery on touch --- */
        @media (hover: none) and (pointer: coarse) {
            .img-container:active .img-full-view,
            .img-container:active .img-cover-view {
                transform: scale(1.03);
            }
        }

        /* --- iPhone 16 Pro specific (393px wide, 852px tall) --- */
        @media screen and (min-width: 390px) and (max-width: 430px) {
            .hero-title { font-size: 3.5rem; line-height: 1.1; }
            .section-pad { padding-left: 1.25rem; padding-right: 1.25rem; }
        }

        /* --- iPhone notch / Dynamic Island safe areas --- */
        @supports (padding-top: env(safe-area-inset-top)) {
            .safe-top { padding-top: max(1rem, env(safe-area-inset-top)); }
            .safe-bottom { padding-bottom: max(1rem, env(safe-area-inset-bottom)); }
        }

        /* --- ProMotion 120Hz optimization --- */
        @media (prefers-reduced-motion: no-preference) {
            .tilt-card, .img-full-view, .img-cover-view, .glass-card, .cta-btn {
                will-change: transform;
            }
        }
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* --- Close button --- */
        .close-btn {
            width: 44px;
            height: 44px;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .close-btn:hover, .close-btn:active {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(232, 54, 78, 0.4);
        }
    </style>
</head>
<body class="antialiased selection:bg-accent selection:text-white">

    <!-- Gradient mesh background -->
    <div class="gradient-mesh"></div>

    <!-- Particle canvas -->
    <canvas id="bg-canvas"></canvas>

    <main class="relative z-10">

        <!-- ===== HERO SECTION ===== -->
        <section class="h-screen-safe flex flex-col justify-center items-center text-center px-6 relative safe-top">
            <!-- Floating hearts decoration -->
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
                <span class="floating-heart" style="left: 10%; top: 60%; animation-delay: 0s;">&#10084;</span>
                <span class="floating-heart" style="left: 25%; top: 70%; animation-delay: 1.5s;">&#10084;</span>
                <span class="floating-heart" style="left: 75%; top: 55%; animation-delay: 3s;">&#10084;</span>
                <span class="floating-heart" style="left: 85%; top: 65%; animation-delay: 4.5s;">&#10084;</span>
                <span class="floating-heart" style="left: 50%; top: 75%; animation-delay: 2s;">&#10084;</span>
            </div>

            <div class="gsap-hero opacity-0 translate-y-10">
                <p class="text-accent-soft tracking-[0.35em] text-xs uppercase mb-6 font-medium">A Love Story</p>
                <h1 class="hero-title text-6xl md:text-9xl font-bold leading-none">
                    You & Me
                </h1>
                <p class="mt-8 text-gray-400 max-w-md mx-auto leading-relaxed text-base font-light">
                    For my favorite person in the entire world.
                </p>
                <div class="mt-8 flex justify-center">
                    <div class="accent-line"></div>
                </div>
            </div>

            <div class="absolute bottom-12 scroll-indicator">
                <p class="text-[10px] text-gray-500 tracking-[0.3em] uppercase font-medium">Scroll</p>
                <div class="scroll-line"></div>
            </div>
        </section>

        <!-- ===== STORY SECTION ===== -->
        <section class="min-h-screen-safe flex items-center justify-center py-24 px-6 section-pad">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-16 items-center max-w-6xl mx-auto">
                <div class="gsap-text-1 order-2 md:order-1">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="timeline-dot"></div>
                        <p class="text-accent-soft text-xs tracking-[0.25em] uppercase font-medium">Chapter One</p>
                    </div>
                    <h2 class="text-4xl md:text-5xl mb-6 leading-[1.15] font-semibold">
                        It started with a <span class="text-accent italic font-bold">Birthday Wish</span>.
                    </h2>
                    <p class="text-base text-gray-400 leading-relaxed mb-8 font-light">
                        I still remember the first time I saw you. Life has been different ever since. Every day with you feels like a new page in the best book ever written.
                    </p>
                    <div class="accent-line"></div>
                </div>

                <div class="tilt-card order-1 md:order-2" data-tilt data-tilt-max="8" data-tilt-speed="600" data-tilt-glare="true" data-tilt-max-glare="0.15">
                    <div class="img-container shadow-2xl shadow-accent/10 group">
                        <img src="pics/beautiful-birthday.jpg" alt="The Beginning" class="img-full-view" loading="eager">
                        <div class="absolute bottom-0 left-0 w-full p-5 z-10">
                            <p class="text-white/80 font-serif italic text-lg">"The Beginning"</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider mx-6"></div>

        <!-- ===== PHOTO GALLERY ===== -->
        <section class="py-24 px-4 section-pad">
            <div class="text-center mb-16 gsap-gallery-header">
                <p class="text-accent-soft text-xs tracking-[0.25em] uppercase font-medium mb-4">Our Moments</p>
                <h2 class="text-3xl md:text-5xl font-semibold">Memories Together</h2>
            </div>
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6">

                    <div class="tilt-card gsap-photo opacity-0 translate-y-20" data-tilt data-tilt-max="6" data-tilt-speed="600" data-tilt-glare="true" data-tilt-max-glare="0.1">
                        <div class="img-container h-80 md:h-96 group">
                            <img src="pics/20241124_104045.jpg" class="img-cover-view" loading="lazy" alt="Memory">
                        </div>
                    </div>

                    <div class="tilt-card md:-mt-8 gsap-photo opacity-0 translate-y-20" data-tilt data-tilt-max="6" data-tilt-speed="600" data-tilt-glare="true" data-tilt-max-glare="0.1">
                        <div class="img-container h-[420px] md:h-[480px] relative group">
                            <img src="pics/SHE02455.JPG" class="img-cover-view" loading="lazy" alt="Memory">
                            <div class="absolute inset-0 bg-accent/5 mix-blend-overlay pointer-events-none"></div>
                        </div>
                    </div>

                    <div class="tilt-card gsap-photo opacity-0 translate-y-20" data-tilt data-tilt-max="6" data-tilt-speed="600" data-tilt-glare="true" data-tilt-max-glare="0.1">
                        <div class="img-container h-80 md:h-96 group">
                            <img src="pics/IMG_20260110_151423.jpg" class="img-cover-view" loading="lazy" alt="Memory">
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <div class="section-divider mx-6"></div>

        <!-- ===== SURPRISE SECTION ===== -->
        <section class="h-screen-safe flex items-center justify-center relative px-6 safe-bottom">
            <div class="text-center z-20 gsap-cta">
                <p class="text-accent-soft mb-4 tracking-[0.25em] text-xs uppercase font-medium">One Last Thing</p>
                <h2 class="text-5xl md:text-7xl mb-4 font-semibold glow-text">Are you ready?</h2>
                <p class="text-gray-500 text-sm mb-10 font-light">Tap to reveal your surprise</p>
                <button onclick="revealSurprise()" class="cta-btn" aria-label="Reveal surprise">
                    <span class="btn-shine"></span>
                    <span class="relative z-10">Reveal</span>
                </button>
            </div>
        </section>

    </main>

    <!-- ===== SURPRISE OVERLAY ===== -->
    <div id="surprise-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-8">
        <div class="reveal-content max-w-lg text-center px-4">
            <div class="heartbeat inline-block mb-8">
                <span class="text-6xl">&#10084;&#65039;</span>
            </div>
            <h2 class="text-4xl md:text-6xl text-accent font-serif mb-6 glow-text leading-tight">Happy Valentine's!</h2>
            <p class="text-lg md:text-xl text-gray-300 leading-relaxed font-light">
                My love, words aren't enough, so I got us something special.
            </p>
            <div class="mt-10 mb-12 px-4">
                <div class="glass-card p-6 md:p-8 inline-block">
                    <span class="text-2xl md:text-3xl text-white font-bold leading-snug">
                        The little one growing<br>inside you &#128118;
                    </span>
                </div>
            </div>
            <button onclick="closeSurprise()" class="close-btn mx-auto" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>
    <script>
        // --- GSAP Animations (ProMotion 120Hz optimized) ---
        gsap.registerPlugin(ScrollTrigger);

        // Hero entrance
        const heroTl = gsap.timeline({ defaults: { ease: "power3.out" } });
        heroTl
            .to(".gsap-hero", { opacity: 1, y: 0, duration: 1.2 })
            .from(".gsap-hero p:first-child", { opacity: 0, y: -15, duration: 0.8 }, "-=0.8")
            .from(".gsap-hero h1", { opacity: 0, scale: 0.95, duration: 1 }, "-=0.6")
            .from(".gsap-hero p:last-of-type", { opacity: 0, y: 15, duration: 0.8 }, "-=0.5")
            .from(".gsap-hero .accent-line", { width: 0, duration: 0.6 }, "-=0.3");

        // Story section
        gsap.from(".gsap-text-1", {
            scrollTrigger: {
                trigger: ".gsap-text-1",
                start: "top 85%",
                end: "top 40%",
                scrub: false,
            },
            opacity: 0,
            x: -40,
            duration: 1,
            ease: "power2.out"
        });

        // Gallery header
        gsap.from(".gsap-gallery-header", {
            scrollTrigger: {
                trigger: ".gsap-gallery-header",
                start: "top 85%",
            },
            opacity: 0,
            y: 30,
            duration: 0.8,
            ease: "power2.out"
        });

        // Photo cards staggered reveal
        gsap.to(".gsap-photo", {
            scrollTrigger: {
                trigger: ".gsap-photo",
                start: "top 88%",
            },
            opacity: 1,
            y: 0,
            duration: 0.8,
            stagger: 0.15,
            ease: "power2.out"
        });

        // CTA section
        gsap.from(".gsap-cta", {
            scrollTrigger: {
                trigger: ".gsap-cta",
                start: "top 80%",
            },
            opacity: 0,
            y: 40,
            duration: 1,
            ease: "power2.out"
        });

        // --- Surprise Reveal ---
        function revealSurprise() {
            document.getElementById('surprise-overlay').classList.add('active');
            // Disable scrolling
            document.body.style.overflow = 'hidden';

            // Confetti burst
            const duration = 4000;
            const end = Date.now() + duration;
            const colors = ['#e8364e', '#ff6b81', '#d4a853', '#f0d78c', '#ffffff'];

            (function frame() {
                confetti({
                    particleCount: 3,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0, y: 0.6 },
                    colors: colors,
                    drift: 0.5
                });
                confetti({
                    particleCount: 3,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1, y: 0.6 },
                    colors: colors,
                    drift: -0.5
                });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());

            // Big center burst after slight delay
            setTimeout(() => {
                confetti({
                    particleCount: 80,
                    spread: 100,
                    origin: { y: 0.5, x: 0.5 },
                    colors: colors,
                    startVelocity: 35,
                    gravity: 0.8
                });
            }, 600);
        }

        function closeSurprise() {
            document.getElementById('surprise-overlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        // --- Background Particle System ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particlesArray = [];
        let mouseX = -1000, mouseY = -1000;

        function resizeCanvas() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas, { passive: true });

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 2 + 0.5;
                this.baseSpeedX = (Math.random() - 0.5) * 0.3;
                this.baseSpeedY = (Math.random() - 0.5) * 0.3;
                this.speedX = this.baseSpeedX;
                this.speedY = this.baseSpeedY;
                const colorType = Math.random();
                if (colorType < 0.4) {
                    this.color = `rgba(232, 54, 78, ${Math.random() * 0.4 + 0.1})`;
                } else if (colorType < 0.6) {
                    this.color = `rgba(212, 168, 83, ${Math.random() * 0.3 + 0.1})`;
                } else {
                    this.color = `rgba(255, 220, 220, ${Math.random() * 0.3 + 0.1})`;
                }
            }
            update() {
                // Soft mouse interaction
                const dx = mouseX - this.x;
                const dy = mouseY - this.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                if (dist < 120) {
                    const force = (120 - dist) / 120;
                    this.speedX -= (dx / dist) * force * 0.3;
                    this.speedY -= (dy / dist) * force * 0.3;
                } else {
                    this.speedX += (this.baseSpeedX - this.speedX) * 0.02;
                    this.speedY += (this.baseSpeedY - this.speedY) * 0.02;
                }
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x > width + 10) this.x = -10;
                if (this.x < -10) this.x = width + 10;
                if (this.y > height + 10) this.y = -10;
                if (this.y < -10) this.y = height + 10;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Draw faint connection lines between close particles
        function drawConnections() {
            for (let i = 0; i < particlesArray.length; i++) {
                for (let j = i + 1; j < particlesArray.length; j++) {
                    const dx = particlesArray[i].x - particlesArray[j].x;
                    const dy = particlesArray[i].y - particlesArray[j].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 100) {
                        ctx.strokeStyle = `rgba(232, 54, 78, ${0.03 * (1 - dist / 100)})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[i].x, particlesArray[i].y);
                        ctx.lineTo(particlesArray[j].x, particlesArray[j].y);
                        ctx.stroke();
                    }
                }
            }
        }

        function initParticles() {
            const count = window.innerWidth < 500 ? 50 : 80;
            particlesArray = [];
            for (let i = 0; i < count; i++) {
                particlesArray.push(new Particle());
            }
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            particlesArray.forEach(p => { p.update(); p.draw(); });
            drawConnections();
            requestAnimationFrame(animate);
        }

        // Touch/mouse tracking for particle interaction
        document.addEventListener('mousemove', (e) => { mouseX = e.clientX; mouseY = e.clientY; }, { passive: true });
        document.addEventListener('touchmove', (e) => {
            if (e.touches[0]) { mouseX = e.touches[0].clientX; mouseY = e.touches[0].clientY; }
        }, { passive: true });
        document.addEventListener('touchend', () => { mouseX = -1000; mouseY = -1000; }, { passive: true });

        initParticles();
        animate();

        // Re-init particles on resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(initParticles, 250);
        }, { passive: true });
    </script>
</body>
</html>
